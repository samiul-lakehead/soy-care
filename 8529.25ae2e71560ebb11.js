"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8529],{8529:(w,d,i)=>{i.r(d),i.d(d,{AnalyticsPageModule:()=>v});var g=i(6814),p=i(95),o=i(5548),h=i(4248),e=i(6689),m=i(9862);function f(t,n){1&t&&(e.TgZ(0,"div"),e._UZ(1,"ion-spinner",16),e.qZA())}function y(t,n){if(1&t&&(e.TgZ(0,"div",17),e._UZ(1,"img",18),e.TgZ(2,"div"),e._uU(3,"Figure: The constructed LCC (\xb5mol m"),e.TgZ(4,"sup"),e._uU(5,"-2"),e.qZA(),e._uU(6,") distribution image where lighter yellow (or darker brown) color means lower chlorophyll concentration and darker green color means higher chlorophyll concentration."),e.qZA()()),2&t){const s=e.oxw();e.xp6(1),e.s9C("src",s.responseImageUrl,e.LSH)}}const A=[{path:"",component:(()=>{var t;class n{constructor(a){this.http=a,this.seedingDate="",this.captureDate="",this.responseImageUrl="",this.showLoader=!1,this.showImage=!1}ngOnInit(){}onFileSelected(a){this.selectedFile=a.target.files[0]}fetchChlorophyll(){let a=!1;var l=document.getElementById("seedingDate");l&&(this.seedingDate=l.value,(""==this.seedingDate||null==this.seedingDate)&&(alert("Seeding date must be selected"),a=!0));var u=document.getElementById("captureDate");if(u&&(this.captureDate=u.value,(""==this.captureDate||null==this.captureDate)&&(alert("Image capture date must be selected"),a=!0)),Date.parse(this.seedingDate)>Date.parse(this.captureDate)&&(alert("Seeding date must be a previous date than image capture date"),a=!0),this.selectedFile||(alert("A calibrated image has to be selected"),a=!0),a)return;const r=new FormData;r.append("seedingDate",this.seedingDate),r.append("captureDate",this.captureDate),r.append("selectedFile",this.selectedFile);let b={method:"POST",header:{"Content-type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST"},body:r};this.showLoader=!0,this.showImage=!1,fetch("https://26d0-65-39-45-111.ngrok-free.app/image",b).then(c=>{if(c.ok)return c.blob();throw new Error("Problem occured")}).then(c=>{const P=URL.createObjectURL(c);this.responseImageUrl=P,this.showLoader=!1,this.showImage=!0,console.log(this.responseImageUrl)}).catch(c=>{this.showLoader=!1,this.showImage=!1,console.log(c)})}}return(t=n).\u0275fac=function(a){return new(a||t)(e.Y36(m.eN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-analytics"]],decls:35,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"image-ul-form"],["for","captureDate"],["type","date","id","captureDate","name","captureDate","required",""],["for","seedingDate"],["type","date","id","seedingDate","name","seedingDate","required",""],["for","imageFile"],["type","file","id","imageFile","name","image","accept","image/tiff",3,"change"],[1,"submit-btn-container"],[1,"photo-ul-btn",3,"click"],[4,"ngIf"],["class","image-container","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["name","crescent","color","success"],["fxLayout","column","fxLayoutAlign","center center",1,"image-container"],["alt","No response yet","srcset","",3,"src"]],template:function(a,l){1&a&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Analytics"),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"ion-header",3)(8,"ion-toolbar")(9,"ion-title",4),e._uU(10,"Analytics"),e.qZA()()(),e.TgZ(11,"div",5)(12,"div")(13,"h3")(14,"label",6),e._uU(15,"Which date the image was captured?"),e.qZA()(),e._UZ(16,"input",7),e.qZA(),e.TgZ(17,"div")(18,"h3")(19,"label",8),e._uU(20,"Which date the seeds were sowed?"),e.qZA()(),e._UZ(21,"input",9),e.qZA(),e.TgZ(22,"div")(23,"h3")(24,"label",10),e._uU(25,"Select the calibrated image to upload:"),e.qZA()(),e.TgZ(26,"input",11),e.NdJ("change",function(r){return l.onFileSelected(r)}),e.qZA()(),e.TgZ(27,"div"),e._uU(28," \xa0 "),e.qZA(),e.TgZ(29,"div",12)(30,"div")(31,"button",13),e.NdJ("click",function(){return l.fetchChlorophyll()}),e._uU(32,"Analyse"),e.qZA()(),e.YNc(33,f,2,0,"div",14),e.qZA()(),e.YNc(34,y,7,1,"div",15),e.qZA()),2&a&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(27),e.Q6J("ngIf",l.showLoader),e.xp6(1),e.Q6J("ngIf",l.showImage))},dependencies:[g.O5,o.Sm,o.W2,o.Gu,o.fG,o.PQ,o.wd,o.sr],styles:[".image-ul-form[_ngcontent-%COMP%]{padding:1em}.photo-ul-btn[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;border:none;padding:10px 20px;cursor:pointer}.submit-btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:30px}.image-container[_ngcontent-%COMP%]{padding:1em}"]}),n})()}];let Z=(()=>{var t;class n{}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(A),h.Bz]}),n})(),v=(()=>{var t;class n{}return(t=n).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,p.u5,o.Pc,Z]}),n})()}}]);